**一、Linux文件存储**

当你在Linux保存一个文件时，Linux会在磁盘上把这个文件拆成三个部分：
- inode(索引节点)，文件的元数据。它保存了除文件内容与文件名以外的信息，比如权限、所有者、大小、创建时间，以及文件内容到底存在磁盘的哪个坑位。
- data block(数据块)，文件的真实内容。
- 目录文件，本质是一个表格，记录了文件名与inode号的对应关系。



**二、inode介绍**

inode是文件的身份证或者元数据档案。在Linux中，文件名只是为了方便人记忆，系统内部全靠inode号来管理文件。

2.1、inode存放了什么：
- 权限(rwx)
- 所有者(UID 、GID)
- 文件大小
- 时间戳（创建、修改、最后读取时间）
- 连接数（有多少个文件名指向这个inode）
- 数据块指针：指引系统去磁盘的哪些数据块里寻找文件数据内容

如果想看文件inode信息，使用stat命令。


2.2、文件名存放位置

文件名不存放在inode中，而是存放在目录文件里。

目录在Linux里也是一个文件，它的内容就像一张表格，记录文件名与inode号的对应关系。

比如，当你执行cat a.txt时，系统会先在当前目录表里找a.txt对应的inode号，再通过inode找到磁盘上的数据。

2.3、inode特性：
- 在同一个文件系统分区内，每个文件对应的inode号是唯一的。
- 格式化硬盘时，inode的总数已经固定了。有些时候会遇到磁盘空间不足，但df -h显示还有空闲空间，这一般是因为小文件太多，把inode用光了。

```
# 查看文件inode号
ls -i file

# 查看分区inode使用情况
df -i
```



**三、链接文件介绍**

在Linux，如果用户想把同一个文件保存在两个地方或使用两个不同的文件名保存，除了复制以外还有另外一种选择，就是链接，在Linux系统中链接分为硬链接、软链接、空链接和递归链接等。

链接命令：ln

语法
```
ln 源文件路径 链接位置路径
```

常用参数：
```
-s 创建软链接，不使用这个参数就是硬链接
-f 强制执行
-i 交互模式。文件存在则提示用户是否覆盖
-n 把符号链接视为一般目录，显示为一般文件
-v 显示详细的处理过程
```


**软链接与硬链接**

硬链接(Hard Link)：多个文件名指向同一个inode。删除原文件，硬链接仍然可以使用。

软链接(Symbolic Link):类似Windows的快捷方式，它是一个独立文件，内容指向原文件的路径。原文件删除，它就失去作用了。软链接的文件inode不一样。

总结：
a、硬链接不能链接目录，不能跨文件系统，软链接可以
b、源文件删除后软链接失效，硬链接仍然可用


**四、时间戳**

时间戳是指格林威治标准时间 1970年01月01日00时00分00秒（北京时间1970年01月01日08时00分00秒）起到现在的总毫秒数。

使用stat命令查看文件时除了创建时间还有三个与时间戳有关的信息：
- atime，访问时间
- ctime，改变时间
- mtime，修改时间

