练习文本文件
```
vim practice.txt
```

```
# User Login Log
2026-02-01 10:15:23 user1 192.168.1.10 SUCCESS
2026-02-01 10:17:45 user2 192.168.1.11 FAILED
2026-02-01 10:20:12 admin 192.168.1.100 SUCCESS
2026-02-02 09:01:33 user3 10.0.0.5 FAILED
2026-02-02 09:15:02 user1 192.168.1.10 SUCCESS
2026-02-02 10:22:59 test 172.16.0.8 FAILED
2026-02-03 11:45:00 admin 192.168.1.100 SUCCESS
2026-02-03 12:00:01 guest 8.8.8.8 FAILED
2026-02-03 12:05:44 root 127.0.0.1 SUCCESS
```


**一、grep文本过滤**

grep可以查找和过滤文本。

1.1、查找包含FAILED的行
```
# 查找登录失败记录
grep FAILED practice.txt
```


1.2、查找包含admin的行
```
grep admin practice.txt
```

1.3、忽略大小写查找
```
grep -i success practice.txt
```

1.4、显示匹配到的内容行号
```
grep -n FAILED practice.txt
```

1.5、统计FAILED次数
```
grep -c FAILED practice.txt
```

1.6、反向匹配（排除）
```
grep -v SUCCESS practice.txt
```

1.7、正则匹配IP
```
# 查找192.168开头的IP
grep '192\.168' practice.txt
```



**二、sed修改文本**

**sed介绍**

sed是一个流（行）编辑器。

文本编辑器的操作对象是文件；而流编辑器的操作对象时文件中的行。前者一次处理一个文本；后者一次处理一个文本中的一行。

sed使用者只能在命令行输入编辑命令、指定文件名，然后在屏幕查看输出。



2.1、替换
```
# 只会显示替换结果，原文件内容不会被修改
sed 's/FAILED/ERROR/g' practice.txt
```

如果要修改文件内容：
```
sed -i 's/FAILED/ERROR/g' practice.txt
```



2.2、删除匹配行
```
# 删除包含guest的行
sed '/guest/d' practice.txt
```


2.3、删除第一行
```
sed '1d' practice.txt
```

2.4、打印第2到第5行
```
sed -n '2,5p' practice.txt
```

2.5、只打印包含FAILED的行
```
sed -n '/FAILED/p' practice.txt
```



**三、awk数据处理**

awk的默认分割字符是空格。

拿practice.txt来举例进行字段说明：
```
$1 = 日期
$2 = 时间
$3 = 用户名
$4 = IP
$5 = 登录结果
```

3.1、打印用户名和登录结果
```
awk '{print $3,$5}' practice.txt
```

3.2、只打印FAILED的用户名
```
awk '$5=="FAILED" {print $3}' practice.txt
```

3.3、统计FAILED次数
```
awk '$5=="FAILED" {count++} END {print count}' practice.txt
```

3.4、统计每个用户登记次数
```
awk '{user[$3]++} END {for(u in user) print u,user[u]}' practice.txt
```

3.5、输出IP和状态
```
awk '{print $4,$5}' practice.txt
```


3.6、统计SUCCESS和FAILED数量
```
awk '{status[$5]++} END {for(s in status) print s,status[s]}' practice.txt
```

