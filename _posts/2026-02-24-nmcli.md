
查看网络状态
```
nmcli device status
nmcli connection show
nmcli general status
```

查看ip信息
```
nmcli device show
nmcli device show eth0
```

配置静态ip
```
nmcli connection modify eth0 \
ipv4.method manual \
ipv4.addresses 192.168.1.100/24 \
ipv4.gateway 192.168.1.1 \
ipv4.dns "8.8.8.8"

nmcli connection up eth0
```


设置dhcp
```
nmcli connection modify eth0 ipv4.method auto
nmcli connection up eth0
```

重启网络
```
nmcli networking off
nmcli networking on
```

=======================================================

nmcli常用设置
```
# 1、 -t简化输出
[root@localhost ~]# nmcli -t connection
ens160:f1ee5656-d990-39dd-af67-fb8cb1832d89:802-3-ethernet:ens160
lo:26772e73-231a-467c-81fb-61f53e0c447d:loopback:lo

# 2、人性化输出
[root@localhost ~]# nmcli -p connection
======================================
  NetworkManager connection profiles
======================================
NAME    UUID                                  TYPE      DEVICE 
------------------------------------------------------------------------------->
ens160  f1ee5656-d990-39dd-af67-fb8cb1832d89  ethernet  ens160 
lo      26772e73-231a-467c-81fb-61f53e0c447d  loopback  lo     

# 3、-f过滤字段
[root@localhost ~]# nmcli -f STATE connection
STATE     
activated 
activated 

# 4、查看主机名
[root@localhost ~]# nmcli general hostname
# 5、设置主机名
[root@localhost ~]# nmcli general hostname haha
[root@localhost ~]# nmcli general hostname
haha
```



============================================================

nmcli connection负责网卡的网络配置

```
# nmcli connection

add     添加
delete      删除
edit        编辑
help        帮助
load        加载
monitor     监控
show        查看
clone       克隆
down        停用
modify      修改
reload      重载
up          启用
```



常用命令和选项
```
# 1、查看连接
nmcli connection show
nmcli connection show eth0

# 2、启动连接
nmcli connection up eth0

# 3、关闭连接
nmcli connection down eth0

# 4、修改连接

# 设置dhcp
nmcli connection modify eth0 ipv4.method auto



# 设置静态ip
# modify eth0 修改eth0的连接配置
# ipv4.method manual 手动获取ip地址
# ipv4.addresses 192.168.1.100/24 设置静态ip和掩码
# ipv4.gateway 192.168.1.1 设置默认网关
# ipv4.dns 8.8.8.8 设置dns
# autoconnect yes 开启自动激活连接
 
nmcli connection modify eth0 \
ipv4.method manual \
ipv4.addresses 192.168.1.100/24 \
ipv4.gateway 192.168.1.1 \
ipv4.dns 8.8.8.8 \
autoconnect yes

# 修改配置后，down再up刷新网卡配置
# 5、禁用eth0连接
nmcli connection down eth0

# 6、激活eth0连接
nmcli connection up eth0
# 补充：up和down指令除了设备名称以外，还可以使用设备uuid或网卡配置文件位置


# 7、克隆新连接
# clone生成的新连接会拥有全新的 UUID，但物理接口（ifname）可能还是指向同一个网卡。如果你同时启动两个指向同一物理网卡的配置，可能会发生冲突
# 执行 nmcli connection show 就能看到新出现的 ens-test 了
nmcli connection clone eth0 eth-test1


```




============================================================


nmcli device管理物理设备或虚拟网络设备，比如eth0、ens33等
```
# nmcli device

connect             连接
disconnect          断开
lldp                显示通过lldp协议学习到的相邻设备信息
monitor             监控设备
set                 设置设备
status              显示设备状态
delete              删除设备 只能删除软件设备
help                帮助
modify              修改
reapply             更新
show                查看详细信息
wifi                无线网络管理
```



```
# 1、查看设备状态
nmcli device status

# 2、查看设备详细信息
nmcli device show
nmcli device show eth0

# 3、启用设备
nmcli device connect eth0

# 4、禁用设备
nmcli device disconnect eth0

# 5、重新扫描设备
nmcli device wifi rescan
```



==============================================================

nmcli命令返回值介绍
```
0：操作成功
1：未知错误
2：无效用户输入，错误参数调用
3：超时了
4：连接激活失败
5：连接断开失败
6：删除连接失败
7：设备未找到
8：连接未找到
9：设备不可用
10：权限不足
```



====================================================