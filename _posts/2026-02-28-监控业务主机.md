---
title: 监控业务主机
date: 2026-02-28 01:00:00 +0800
categories: [prometheus + grafana]
tags: [node]
---
案例：通过Prometheus（192.168.88.137）监控业务机器192.168.88.138(node1)

### 一、实现步骤

node1操作

a、下载并安装监控客户端
```
# 下载监控客户端
wget https://github.com/prometheus/node_exporter/releases/download/v1.10.2/node_exporter-1.10.2.linux-amd64.tar.gz

# 解压并安装
tar xf node_exporter-1.10.2.linux-amd64.tar.gz -C /usr/local/ && cd /usr/local/node_exporter-1.10.2.linux-amd64/

# 后台启动
nohup ./node_exporter &
```

查看业务机器(node1)监控插件端口
```
lsof -i :9100
```
![](/assets/img/Pasted image 20260228071411.png)

放行9100端口
```
firewall-cmd --permanent --add-port=9100/tcp
firewall-cmd --reload
```


访问http://192.168.88.138:9100/metrics
![](/assets/img/Pasted image 20260228071722.png)

此时node1的数据被打包为一个可以访问的web页面，如图所示代表监控客户端部署完毕




b、在Prometheus添加监控信息


被监控主机(node1)设置完成后，需要在Prometheus的主配置文件添加被监控机信息


在192.168.88.137
```
vi prometheus.yml
```

最后的文件原配置
```
scrape_configs:
  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.
  - job_name: "prometheus"

    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.

    static_configs:
      - targets: ["localhost:9090"]
       # The label name is added as a label `label_name=<label_value>` to any timeseries scraped from this config.
        labels:
          app: "prometheus"
```


添加node1,即192.168.88.138的监控
```
  - job_name: "node1"              # 定义名称
    static_configs:                # 定义具体配置
      - targets:  ["192.168.88.138:9100"]     # 定义目标
```

注意配置文件的缩进！！！


重启服务
```
pkill prometheus

./prometheus --config.file=prometheus.yml &
```




c、验证业务机器node1是否被Prometheus监控

![](/assets/img/Pasted image 20260228073050.png)

如图所示，node1（192.168.88.138）主机状态成功被监控
